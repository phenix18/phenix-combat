name: hamster-snap # you probably want to 'snapcraft register <name>'
base: core18 # the base snap is the execution environment for this snap
version: '0.1' # just for humans, typically '1.2+git' or '1.3.2'
summary: Hamster time tracker snap # 79 char long summary
description: |
  Hamster is time tracking for individuals. It helps you to keep track of how much time you have spent during the day on activities you choose to track.

architectures:
  - build-on: amd64
    run-on: all

grade: devel # must be 'stable' to release into candidate/stable channels
confinement: devmode # use 'strict' once you have the right plugs and slots

slots:
  gconf-service:
    interface: dbus
    bus: session
    name: org.gnome.GConf
#   dbus-service:
#     interface: dbus
#     bus: session
#     name: org.gnome.Hamster
#   dbus-windows-service:
#     interface: dbus
#     bus: session
#     name: org.gnome.Hamster.WindowServer
#   dbus-gnome:
#     interface: dbus
#     bus: session
#     name: org.gnome.GConf.Server

parts:
  hamster:
    stage-packages:
      - gettext
      - intltool
      - python3-distutils-extra
      - python3-gi
      - python3-gi-cairo
      - python3-distutils
      - python3-dbus
      - python3-xdg
      - gconf2
      - gir1.2-gconf-2.0
    source: .
    plugin: waf
  lancher:
    after: [ hamster ]
    plugin: dump
    source: snap/local/
    organize:
      launcher.py: usr/bin/launcher
    prepare: |
      chmod +x usr/bin/launcher

apps:
  hamster-snap:
    command: usr/bin/launcher
    extensions: [gnome-3-28]
    desktop: usr/share/applications/hamster.desktop
    plugs:
      - gsettings # For desktop theme detection under Wayland session
      - home
    # slots:
    #   - dbus-service
    #   - dbus-windows-service
    #   - dbus-gnome
